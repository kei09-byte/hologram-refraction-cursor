<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Quantum Field Lines</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      /* ミニクロック寄りの配色（紫は弱め） */
      --bg-deep: #05060a;
      --glow-cyan: #5ce1ff;
      --glow-teal: #35ffc3;
      --glow-rose: #ff8fb8;
      --glow-violet: #b38cff;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: var(--bg-deep);
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
        "SF Pro Display", "Helvetica Neue", sans-serif;
    }

    /* Notion 埋め込み時：iframe の高さ = この高さ */
    .field-wrapper {
      position: relative;
      width: 100vw;
      height: 100vh; /* Notion 側で 180〜260px 程度にすると良い */
      overflow: hidden;
      background: radial-gradient(circle at 0% 0%, #070a14, #020308 60%);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
    }

    /* 右下のさりげないラベル（不要なら削除可） */
    .field-label {
      position: absolute;
      right: 18px;
      bottom: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: linear-gradient(
        120deg,
        rgba(8, 12, 22, 0.88),
        rgba(26, 38, 60, 0.75)
      );
      color: rgba(255, 255, 255, 0.9);
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      gap: 6px;
      pointer-events: none;
    }

    .field-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #5ce1ff, #35ffc3);
      box-shadow: 0 0 12px rgba(92, 225, 255, 0.9);
    }
  </style>
</head>
<body>
  <div class="field-wrapper">
    <canvas id="fieldCanvas"></canvas>
    <div class="field-label">
      <span class="field-dot"></span>
      <span>Quantum Field Lines</span>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("fieldCanvas");
    const ctx = canvas.getContext("2d");

    let width = 0;
    let height = 0;
    let dpr = window.devicePixelRatio || 1;
    let time = 0;

    // フィールド線の本数・パラメータ
    const lineCount = 40;
    const lines = [];

    function initLines() {
      lines.length = 0;
      for (let i = 0; i < lineCount; i++) {
        const t = i / (lineCount - 1); // 0〜1 の位置
        const baseY = t;               // 画面高さに対する相対位置
        const amp = 0.04 + 0.06 * Math.random(); // 波の振幅
        const freq = 1.0 + Math.random() * 1.5;   // 波の周波数
        const speed = (Math.random() * 0.6 + 0.2) * (Math.random() < 0.5 ? -1 : 1);

        // 色を少しずつ変化させる（上：シアン／下：ローズ寄り）
        const c1 = { r: 92, g: 225, b: 255 };
        const c2 = { r: 255, g: 143, b: 184 };
        const mix = t;
        const r = Math.round(c1.r * (1 - mix) + c2.r * mix);
        const g = Math.round(c1.g * (1 - mix) + c2.g * mix);
        const b = Math.round(c1.b * (1 - mix) + c2.b * mix);
        const alpha = 0.45 + 0.35 * (0.5 - Math.abs(t - 0.5)); // 中央ほど明るく

        lines.push({
          baseY,
          amp,
          freq,
          speed,
          phaseOffset: Math.random() * Math.PI * 2,
          color: `rgba(${r}, ${g}, ${b}, ${alpha})`
        });
      }
    }

    function resize() {
      const rect = canvas.getBoundingClientRect();
      width = rect.width;
      height = rect.height;
      canvas.width = width * dpr;
      canvas.height = height * dpr;
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      initLines();
    }

    window.addEventListener("resize", resize);
    resize();

    function drawBackground() {
      // 深い背景グラデーション
      const grad = ctx.createLinearGradient(0, 0, width, height);
      grad.addColorStop(0, "#05060a");
      grad.addColorStop(0.35, "#050913");
      grad.addColorStop(1, "#050712");
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, width, height);

      // ソフトなグロー
      const radialTop = ctx.createRadialGradient(
        width * 0.1,
        height * 0.1,
        0,
        width * 0.1,
        height * 0.1,
        width * 0.7
      );
      radialTop.addColorStop(0, "rgba(92, 225, 255, 0.4)");
      radialTop.addColorStop(1, "rgba(92, 225, 255, 0.0)");
      ctx.fillStyle = radialTop;
      ctx.fillRect(0, 0, width, height);

      const radialBottom = ctx.createRadialGradient(
        width * 0.9,
        height * 0.9,
        0,
        width * 0.9,
        height * 0.9,
        width * 0.9
      );
      radialBottom.addColorStop(0, "rgba(255, 143, 184, 0.28)");
      radialBottom.addColorStop(1, "rgba(255, 143, 184, 0.0)");
      ctx.fillStyle = radialBottom;
      ctx.fillRect(0, 0, width, height);
    }

    function drawFieldLine(line) {
      const baseY = line.baseY * height;
      const amp = line.amp * height;
      const freq = line.freq;
      const speed = line.speed;
      const phase = time * speed + line.phaseOffset;

      ctx.save();
      ctx.lineWidth = 1.2;
      ctx.strokeStyle = line.color;
      ctx.filter = "blur(10px)";
      ctx.globalCompositeOperation = "lighter";

      ctx.beginPath();
      const segments = Math.max(160, Math.floor(width / 6));

      for (let i = 0; i <= segments; i++) {
        const t = i / segments;
        const x = t * width;

        // 基本波 + 高周波成分を重ねて「量子フィールド」っぽさを出す
        const yOffsetMain = Math.sin(t * Math.PI * 2 * freq + phase);
        const yOffsetSub = 0.4 * Math.sin(t * Math.PI * 6 * freq - phase * 1.3);
        const yOffsetNoise = 0.25 * Math.sin(t * Math.PI * 10 + phase * 0.7);

        const y = baseY + (yOffsetMain + yOffsetSub + yOffsetNoise) * amp;

        if (i === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      }

      ctx.stroke();
      ctx.restore();
    }

    function animate(timestamp) {
      time = timestamp * 0.0015; // 全体の時間スケール

      drawBackground();

      // 中央のラインほど手前・明るく見せたいので、順番を工夫
      const mid = Math.floor(lines.length / 2);
      for (let offset = 0; offset < lines.length; offset++) {
        const indexUp = mid + offset;
        const indexDown = mid - offset;
        if (indexUp >= 0 && indexUp < lines.length) drawFieldLine(lines[indexUp]);
        if (indexDown >= 0 && indexDown < lines.length && indexDown !== indexUp) {
          drawFieldLine(lines[indexDown]);
        }
      }

      requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);
  </script>
</body>
</html>
